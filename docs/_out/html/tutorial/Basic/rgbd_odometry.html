

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RGBD odometry &mdash; Open3D latest (cf20af6) documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/open3d_logo.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Visualization" href="visualization.html" />
    <link rel="prev" title="TUM dataset" href="rgbd_images/tum.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Open3D
          

          
          </a>

          
            
            
              <div class="version">
                latest (cf20af6)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">About Open3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compilation.html">Compiling from source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builddocs.html">Building Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contributing to Open3D</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Basic</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python_interface.html">Python interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_io.html">File IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="pointcloud.html">Point cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="mesh.html">Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="rgbd_images/index.html">RGBD images</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">RGBD odometry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#read-camera-intrinsic">Read camera intrinsic</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-rgbd-image">Read RGBD image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compute-odometry-from-two-rgbd-image-pairs">Compute odometry from two RGBD image pairs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualize-rgbd-image-pairs">Visualize RGBD image pairs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="kdtree.html">KDTree</a></li>
<li class="toctree-l2"><a class="reference internal" href="icp_registration.html">ICP registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="working_with_numpy.html">Working with NumPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="jupyter.html">Jupyter Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="azure_kinect.html">Azure Kinect with Open3D</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ReconstructionSystem/index.html">Reconstruction system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C++/cplusplus_interface.html">C++ interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.camera.html">open3d.camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.color_map.html">open3d.color_map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.geometry.html">open3d.geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.io.html">open3d.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.integration.html">open3d.integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.odometry.html">open3d.odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.registration.html">open3d.registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.utility.html">open3d.utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/open3d.visualization.html">open3d.visualization</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Open3D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Basic</a> &raquo;</li>
        
      <li>RGBD odometry</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rgbd-odometry">
<span id="id1"></span><h1>RGBD odometry<a class="headerlink" href="#rgbd-odometry" title="Permalink to this headline">¶</a></h1>
<p>An RGBD odometry finds the camera movement between two consecutive RGBD image pairs. The input are two instances of <code class="docutils literal notranslate"><span class="pre">RGBDImage</span></code>. The output is the motion in the form of a rigid body transformation. Open3D has implemented two RGBD odometries: <a class="reference internal" href="../reference.html#steinbrucker2011" id="id2"><span>[Steinbrucker2011]</span></a> and <a class="reference internal" href="../reference.html#park2017" id="id3"><span>[Park2017]</span></a>.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># examples/Python/Basic/rgbd_odometry.py</span>

<span class="kn">import</span> <span class="nn">open3d</span> <span class="kn">as</span> <span class="nn">o3d</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">pinhole_camera_intrinsic</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_pinhole_camera_intrinsic</span><span class="p">(</span>
        <span class="s2">&quot;../../TestData/camera_primesense.json&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">pinhole_camera_intrinsic</span><span class="o">.</span><span class="n">intrinsic_matrix</span><span class="p">)</span>

    <span class="n">source_color</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/color/00000.jpg&quot;</span><span class="p">)</span>
    <span class="n">source_depth</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/depth/00000.png&quot;</span><span class="p">)</span>
    <span class="n">target_color</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/color/00001.jpg&quot;</span><span class="p">)</span>
    <span class="n">target_depth</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/depth/00001.png&quot;</span><span class="p">)</span>
    <span class="n">source_rgbd_image</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">RGBDImage</span><span class="o">.</span><span class="n">create_from_color_and_depth</span><span class="p">(</span>
        <span class="n">source_color</span><span class="p">,</span> <span class="n">source_depth</span><span class="p">)</span>
    <span class="n">target_rgbd_image</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">RGBDImage</span><span class="o">.</span><span class="n">create_from_color_and_depth</span><span class="p">(</span>
        <span class="n">target_color</span><span class="p">,</span> <span class="n">target_depth</span><span class="p">)</span>
    <span class="n">target_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="o">.</span><span class="n">create_from_rgbd_image</span><span class="p">(</span>
        <span class="n">target_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">)</span>

    <span class="n">option</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">OdometryOption</span><span class="p">()</span>
    <span class="n">odo_init</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>

    <span class="p">[</span><span class="n">success_color_term</span><span class="p">,</span> <span class="n">trans_color_term</span><span class="p">,</span>
     <span class="n">info</span><span class="p">]</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">compute_rgbd_odometry</span><span class="p">(</span>
         <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">target_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">,</span>
         <span class="n">odo_init</span><span class="p">,</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">RGBDOdometryJacobianFromColorTerm</span><span class="p">(),</span> <span class="n">option</span><span class="p">)</span>
    <span class="p">[</span><span class="n">success_hybrid_term</span><span class="p">,</span> <span class="n">trans_hybrid_term</span><span class="p">,</span>
     <span class="n">info</span><span class="p">]</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">compute_rgbd_odometry</span><span class="p">(</span>
         <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">target_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">,</span>
         <span class="n">odo_init</span><span class="p">,</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">RGBDOdometryJacobianFromHybridTerm</span><span class="p">(),</span> <span class="n">option</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">success_color_term</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Using RGB-D Odometry&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">trans_color_term</span><span class="p">)</span>
        <span class="n">source_pcd_color_term</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="o">.</span><span class="n">create_from_rgbd_image</span><span class="p">(</span>
            <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">)</span>
        <span class="n">source_pcd_color_term</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">trans_color_term</span><span class="p">)</span>
        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">([</span><span class="n">target_pcd</span><span class="p">,</span> <span class="n">source_pcd_color_term</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">success_hybrid_term</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Using Hybrid RGB-D Odometry&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">trans_hybrid_term</span><span class="p">)</span>
        <span class="n">source_pcd_hybrid_term</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="o">.</span><span class="n">create_from_rgbd_image</span><span class="p">(</span>
            <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">)</span>
        <span class="n">source_pcd_hybrid_term</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">trans_hybrid_term</span><span class="p">)</span>
        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">([</span><span class="n">target_pcd</span><span class="p">,</span> <span class="n">source_pcd_hybrid_term</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="read-camera-intrinsic">
<span id="reading-camera-intrinsic"></span><h2>Read camera intrinsic<a class="headerlink" href="#read-camera-intrinsic" title="Permalink to this headline">¶</a></h2>
<p>We first read the camera intrinsic matrix from a json file.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="n">pinhole_camera_intrinsic</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_pinhole_camera_intrinsic</span><span class="p">(</span>
        <span class="s2">&quot;../../TestData/camera_primesense.json&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">pinhole_camera_intrinsic</span><span class="o">.</span><span class="n">intrinsic_matrix</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This yields:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">[[</span> <span class="m">525</span>.     <span class="m">0</span>.   <span class="m">319</span>.5<span class="o">]</span>
 <span class="o">[</span>   <span class="m">0</span>.   <span class="m">525</span>.   <span class="m">239</span>.5<span class="o">]</span>
 <span class="o">[</span>   <span class="m">0</span>.     <span class="m">0</span>.     <span class="m">1</span>. <span class="o">]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lots of small data structures in Open3D can be read from / written into <code class="docutils literal notranslate"><span class="pre">json</span></code> files. This includes camera intrinsics, camera trajectory, pose graph, etc.</p>
</div>
</div>
<div class="section" id="read-rgbd-image">
<span id="reading-rgbd-image"></span><h2>Read RGBD image<a class="headerlink" href="#read-rgbd-image" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="n">source_color</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/color/00000.jpg&quot;</span><span class="p">)</span>
    <span class="n">source_depth</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/depth/00000.png&quot;</span><span class="p">)</span>
    <span class="n">target_color</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/color/00001.jpg&quot;</span><span class="p">)</span>
    <span class="n">target_depth</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="s2">&quot;../../TestData/RGBD/depth/00001.png&quot;</span><span class="p">)</span>
    <span class="n">source_rgbd_image</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">RGBDImage</span><span class="o">.</span><span class="n">create_from_color_and_depth</span><span class="p">(</span>
        <span class="n">source_color</span><span class="p">,</span> <span class="n">source_depth</span><span class="p">)</span>
    <span class="n">target_rgbd_image</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">RGBDImage</span><span class="o">.</span><span class="n">create_from_color_and_depth</span><span class="p">(</span>
        <span class="n">target_color</span><span class="p">,</span> <span class="n">target_depth</span><span class="p">)</span>
    <span class="n">target_pcd</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="o">.</span><span class="n">create_from_rgbd_image</span><span class="p">(</span>
        <span class="n">target_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This code block reads two pairs of RGBD images in the Redwood format. We refer to <a class="reference internal" href="rgbd_images/redwood.html#rgbd-redwood"><span class="std std-ref">Redwood dataset</span></a> for a comprehensive explanation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Open3D assumes the color image and depth image are synchronized and registered in the same coordinate frame. This can usually be done by turning on both the synchronization and registration features in the RGBD camera settings.</p>
</div>
</div>
<div class="section" id="compute-odometry-from-two-rgbd-image-pairs">
<span id="compute-odometry"></span><h2>Compute odometry from two RGBD image pairs<a class="headerlink" href="#compute-odometry-from-two-rgbd-image-pairs" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="n">success_color_term</span><span class="p">,</span> <span class="n">trans_color_term</span><span class="p">,</span>
     <span class="n">info</span><span class="p">]</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">compute_rgbd_odometry</span><span class="p">(</span>
         <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">target_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">,</span>
         <span class="n">odo_init</span><span class="p">,</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">RGBDOdometryJacobianFromColorTerm</span><span class="p">(),</span> <span class="n">option</span><span class="p">)</span>
    <span class="p">[</span><span class="n">success_hybrid_term</span><span class="p">,</span> <span class="n">trans_hybrid_term</span><span class="p">,</span>
     <span class="n">info</span><span class="p">]</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">compute_rgbd_odometry</span><span class="p">(</span>
         <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">target_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">,</span>
         <span class="n">odo_init</span><span class="p">,</span> <span class="n">o3d</span><span class="o">.</span><span class="n">odometry</span><span class="o">.</span><span class="n">RGBDOdometryJacobianFromHybridTerm</span><span class="p">(),</span> <span class="n">option</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This code block calls two different RGBD odometry methods. The first one is <a class="reference internal" href="../reference.html#steinbrucker2011" id="id4"><span>[Steinbrucker2011]</span></a>. It minimizes photo consistency of aligned images. The second one is <a class="reference internal" href="../reference.html#park2017" id="id5"><span>[Park2017]</span></a>. In addition to photo consistency, it implements constraint for geometry. Both functions run in similar speed. But <a class="reference internal" href="../reference.html#park2017" id="id6"><span>[Park2017]</span></a> is more accurate in our test on benchmark datasets. It is recommended.</p>
<p>Several parameters in <code class="docutils literal notranslate"><span class="pre">OdometryOption()</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minimum_correspondence_ratio</span></code> : After alignment, measure the overlapping ratio of two RGBD images. If overlapping region of two RGBD image is smaller than specified ratio, the odometry module regards that this is a failure case.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_depth_diff</span></code> : In depth image domain, if two aligned pixels have a depth difference less than specified value, they are considered as a correspondence. Larger value induce more aggressive search, but it is prone to unstable result.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_depth</span></code> and <code class="docutils literal notranslate"><span class="pre">max_depth</span></code> : Pixels that has smaller or larger than specified depth values are ignored.</p></li>
</ul>
</div>
<div class="section" id="visualize-rgbd-image-pairs">
<span id="visualize-rgbd-image"></span><h2>Visualize RGBD image pairs<a class="headerlink" href="#visualize-rgbd-image-pairs" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="k">if</span> <span class="n">success_color_term</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Using RGB-D Odometry&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">trans_color_term</span><span class="p">)</span>
        <span class="n">source_pcd_color_term</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="o">.</span><span class="n">create_from_rgbd_image</span><span class="p">(</span>
            <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">)</span>
        <span class="n">source_pcd_color_term</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">trans_color_term</span><span class="p">)</span>
        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">([</span><span class="n">target_pcd</span><span class="p">,</span> <span class="n">source_pcd_color_term</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">success_hybrid_term</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Using Hybrid RGB-D Odometry&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">trans_hybrid_term</span><span class="p">)</span>
        <span class="n">source_pcd_hybrid_term</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="o">.</span><span class="n">create_from_rgbd_image</span><span class="p">(</span>
            <span class="n">source_rgbd_image</span><span class="p">,</span> <span class="n">pinhole_camera_intrinsic</span><span class="p">)</span>
        <span class="n">source_pcd_hybrid_term</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">trans_hybrid_term</span><span class="p">)</span>
        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">([</span><span class="n">target_pcd</span><span class="p">,</span> <span class="n">source_pcd_hybrid_term</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
<p>The RGBD image pairs are converted into point clouds and rendered together. Note that the point cloud representing the first (source) RGBD image is transformed with the transformation estimated by the odometry. After this transformation, both point clouds are aligned.</p>
<p>Outputs:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Using RGB-D Odometry
<span class="o">[[</span>  <span class="m">9</span>.99985131e-01  -2.26255547e-04  -5.44848980e-03  -4.68289761e-04<span class="o">]</span>
 <span class="o">[</span>  <span class="m">1</span>.48026964e-04   <span class="m">9</span>.99896965e-01  -1.43539723e-02   <span class="m">2</span>.88993731e-02<span class="o">]</span>
 <span class="o">[</span>  <span class="m">5</span>.45117608e-03   <span class="m">1</span>.43529524e-02   <span class="m">9</span>.99882132e-01   <span class="m">7</span>.82593526e-04<span class="o">]</span>
 <span class="o">[</span>  <span class="m">0</span>.00000000e+00   <span class="m">0</span>.00000000e+00   <span class="m">0</span>.00000000e+00   <span class="m">1</span>.00000000e+00<span class="o">]]</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/color_term.png"><img alt="../../_images/color_term.png" src="../../_images/color_term.png" style="width: 400px;" /></a>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Using Hybrid RGB-D Odometry
<span class="o">[[</span>  <span class="m">9</span>.99994666e-01  -1.00290715e-03  -3.10826763e-03  -3.75410348e-03<span class="o">]</span>
 <span class="o">[</span>  <span class="m">9</span>.64492959e-04   <span class="m">9</span>.99923448e-01  -1.23356675e-02   <span class="m">2</span>.54977516e-02<span class="o">]</span>
 <span class="o">[</span>  <span class="m">3</span>.12040122e-03   <span class="m">1</span>.23326038e-02   <span class="m">9</span>.99919082e-01   <span class="m">1</span>.88139799e-03<span class="o">]</span>
 <span class="o">[</span>  <span class="m">0</span>.00000000e+00   <span class="m">0</span>.00000000e+00   <span class="m">0</span>.00000000e+00   <span class="m">1</span>.00000000e+00<span class="o">]]</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/hybrid_term.png"><img alt="../../_images/hybrid_term.png" src="../../_images/hybrid_term.png" style="width: 400px;" /></a>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="visualization.html" class="btn btn-neutral float-right" title="Visualization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rgbd_images/tum.html" class="btn btn-neutral float-left" title="TUM dataset" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 - 2019, www.open3d.org

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
<span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Docs version</span>
    latest (cf20af6)
    <span class="fa fa-caret-down"></span>
</span>

<!-- A hack to include an external page to get around CORS policy -->
<!-- https://stackoverflow.com/a/15250208/1255535 -->
<div class="rst-other-versions">
    <dl>
    <dt>Versions</dt>
        <dd><ul>
            <script src="http://www.open3d.org/docs/versions.js"></script>
        </ul></dd>
    </dl>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>